<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of glhs_R</title>
  <meta name="keywords" content="glhs_R">
  <meta name="description" content="% Generation de plan d'experience LHS a partir de R (avec pretirage de LHS enrichi)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html LMTir --><!-- menu.html tirages -->
<h1>glhs_R
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>% Generation de plan d'experience LHS a partir de R (avec pretirage de LHS enrichi)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [tir,new_tir]=glhs_R(Xmin,Xmax,nb_samples,old_tir,nb_enrich) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% Generation de plan d'experience LHS a partir de R (avec pretirage de LHS enrichi)
% LHS S-optimal (genere en utilisant un algo genetique)
Refs:  - Stocki, R. (2005) A method to improve design reliability using optimal Latin hypercube sampling Computer Assisted Mechanics and Engineering Sciences 12, 87?105.
       -Stein, M. (1987) Large Sample Properties of Simulations Using Latin Hypercube Sampling. Technometrics. 29, 143?151.
 L. LAURENT -- 02/01/2013 -- laurent@lmt.ens-cachan.fr</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../LMTir/routines/gene_doe.html" class="code" title="function [out,info_tirages]=gene_doe(doe)">gene_doe</a>	% Realisation des tirages</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% Generation de plan d'experience LHS a partir de R (avec pretirage de LHS enrichi)</span>
0002 <span class="comment">%% LHS S-optimal (genere en utilisant un algo genetique)</span>
0003 <span class="comment">%Refs:  - Stocki, R. (2005) A method to improve design reliability using optimal Latin hypercube sampling Computer Assisted Mechanics and Engineering Sciences 12, 87?105.</span>
0004 <span class="comment">%       -Stein, M. (1987) Large Sample Properties of Simulations Using Latin Hypercube Sampling. Technometrics. 29, 143?151.</span>
0005 <span class="comment">% L. LAURENT -- 02/01/2013 -- laurent@lmt.ens-cachan.fr</span>
0006 
0007 
0008 
0009 <a name="_sub0" href="#_subfunctions" class="code">function [tir,new_tir]=glhs_R(Xmin,Xmax,nb_samples,old_tir,nb_enrich)</a>
0010 
0011 <span class="comment">%% INPUT:</span>
0012 <span class="comment">%    - Xmin,Xmax: bornes min et max de l'espace de concpetion</span>
0013 <span class="comment">%    - nb_samples: nombre d'echantillons requis</span>
0014 <span class="comment">%    - nb_enrich: nombre d'echantillons requis pour enrichir</span>
0015 <span class="comment">%% OUTPUT</span>
0016 <span class="comment">%   - tir: echantillons</span>
0017 <span class="comment">%   - new_tir: nouveaux echantillons en phase d'enrichissement</span>
0018 <span class="comment">%%</span>
0019 
0020 <span class="comment">%chemin librairies pour bonne execution R</span>
0021 setenv(<span class="string">'DYLD_LIBRARY_PATH'</span>,<span class="string">'/usr/local/bin/'</span>);
0022 
0023 <span class="comment">%%declaration des options</span>
0024 <span class="comment">% repertoire de stockage</span>
0025 rep=<span class="string">'LHS_R'</span>;
0026 <span class="comment">%nombre de plans pretires</span>
0027 nb_pretir=0;;
0028 <span class="comment">%nom du fichier script r</span>
0029 nom_script=<span class="string">'glhs_R_'</span>;
0030 ext_script=<span class="string">'.r'</span>;
0031 <span class="comment">%nom du fichier de donnees R</span>
0032 nom_dataR=<span class="string">'dataR'</span>;
0033 ext_dataR=<span class="string">'.dat'</span>;
0034 <span class="comment">%temps de pause apres execution R</span>
0035 tps_pause=0;
0036 
0037 <span class="comment">%options algo genetique</span>
0038 <span class="comment">%population initiale</span>
0039 popinit=100;
0040 <span class="comment">%nb de mutation</span>
0041 nbmut=5;
0042 <span class="comment">%probabilite de mutation</span>
0043 probmut=0.25;
0044 
0045 <span class="comment">%phase de creation des plans</span>
0046 <span class="keyword">if</span> nargin==3
0047     
0048     <span class="comment">% recuperation dimensions (nombre de variables et nombre d'echantillon)</span>
0049     nbs=nb_samples;
0050     nbv=numel(Xmin);
0051     <span class="comment">%nom fichier complet</span>
0052     nom_script=[nom_script num2str(nbv) <span class="string">'_'</span> num2str(nbs) ext_script];
0053     <span class="comment">%nom fichier donnees complet</span>
0054     nom_dataR=[nom_dataR num2str(nbv) <span class="string">'_'</span> num2str(nbs) ext_dataR];
0055     <span class="comment">%%ecriture d'un script R</span>
0056     <span class="comment">%Creation du repertoire de stockage (s'il n'existe pas)</span>
0057     <span class="keyword">if</span> exist(rep,<span class="string">'dir'</span>)~=7
0058         cmd=[<span class="string">'mkdir '</span> rep];
0059         unix(cmd);
0060     <span class="keyword">end</span>
0061     
0062     <span class="comment">%ecriture du script r</span>
0063     <span class="comment">%procedure de creation du tirage initial</span>
0064     text_init=[<span class="string">'a&lt;-geneticLHS('</span> num2str(nbs) <span class="string">','</span> num2str(nbv) <span class="string">','</span><span class="keyword">...</span>
0065         num2str(popinit) <span class="string">','</span> num2str(nbmut) <span class="string">','</span> num2str(probmut) <span class="string">')\n'</span>];
0066     <span class="comment">%procedure d'enrichissement</span>
0067     text_enrich=[<span class="string">'a&lt;-optAugmentLHS(a,1,4)\n'</span>];
0068     <span class="comment">%chargement librairie LHS</span>
0069     load_LHS=<span class="string">'library(lhs)\n'</span>;
0070     <span class="comment">%procedure stockage tirage</span>
0071     stock_tir=[<span class="string">'write.table(a,file=&quot;'</span> nom_dataR <span class="string">'&quot;,row.names=FALSE,col.names=FALSE)'</span>];
0072     
0073     <span class="comment">%creation et ouverture du fichier de script</span>
0074     fid=fopen([rep <span class="string">'/'</span> nom_script],<span class="string">'w'</span>,<span class="string">'n'</span>,<span class="string">'UTF-8'</span>);
0075     <span class="comment">%ecriture chargement librairie</span>
0076     fprintf(fid,load_LHS);
0077     <span class="comment">%ecriture tirage initial</span>
0078     fprintf(fid,text_init);
0079     <span class="comment">%ecriture de l'enrichissement</span>
0080     <span class="keyword">for</span> ii=1:nb_pretir
0081         fprintf(fid,text_enrich);
0082     <span class="keyword">end</span>
0083     <span class="comment">%ecriture de la procedure de sauvegarde</span>
0084     fprintf(fid,stock_tir);
0085     <span class="comment">%fermeture du fichier</span>
0086     fclose(fid);
0087     <span class="comment">%%execution du script R (necessite d'avoir r installe)</span>
0088     <span class="comment">%test de l'existence de</span>
0089     [e,t]=unix(<span class="string">'which R'</span>);
0090     <span class="keyword">if</span> e~=0
0091         error(<span class="string">'R non installe (absent du PATH)'</span>);
0092     <span class="keyword">else</span>
0093         [~,t]=unix([<span class="string">'cd '</span> rep <span class="string">' &amp;&amp; R -f '</span> nom_script]);
0094         pause(tps_pause)
0095     <span class="keyword">end</span>
0096     <span class="comment">%lecture du fichier de donnees R</span>
0097     A=load([rep <span class="string">'/'</span> nom_dataR]);
0098     <span class="comment">%tirage obtenu</span>
0099     tir=A(1:nbs,:).*repmat(Xmax(:)'-Xmin(:)',nbs,1)+repmat(Xmin(:)',nbs,1);
0100     new_tir=[];
0101     
0102     <span class="comment">%phase d'enrichissement</span>
0103 <span class="keyword">elseif</span> nargin==5
0104     
0105     <span class="comment">%nombre d'echantillons dans le tirage precedent</span>
0106     old_nbs=size(old_tir,1);
0107     
0108     <span class="comment">%chargement du fichier de donnees R</span>
0109     A=load([rep <span class="string">'/'</span> nom_dataR]);
0110     
0111     <span class="comment">%nouveaux tirages</span>
0112     ind=old_nbs+1:old_nbs+nb_enrich;
0113     new_tir=A(ind,:).*repmat(Xmax(:)'-Xmin(:)',nb_enrich,1)+repmat(Xmin(:)',nb_enrich,1);
0114     <span class="comment">%liste de tous les tirages</span>
0115     tir=[old_tir;new_tir];
0116     
0117     
0118 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 07-Feb-2014 19:36:29 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>