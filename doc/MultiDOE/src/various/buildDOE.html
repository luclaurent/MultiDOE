<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of buildDOE</title>
  <meta name="keywords" content="buildDOE">
  <meta name="description" content="% Building sampling">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html MultiDOE --><!-- # src --><!-- menu.html various -->
<h1>buildDOE
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>% Building sampling</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [sampling]=buildDOE(type,ns,Xmin,Xmax,opts) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% Building sampling
 L. LAURENT -- 17/12/2010 -- luc.laurent@lecnam.net

Some criteria require the Matlab's toolbox &quot;Random Numbers Generators&quot; or
the R software

All sampling techniques provide sample points with values between 0 and 1.
The convertion to the right space is done at the end of this file.

% Syntax: gene_doe(doe)
% INPUT variables:
 - type: Kind of DOE (doe.type): see the switch command below
 - ns: number of sample points
 - Xmin: lower bound of the design space
 - Xmax: upper bound of the design space
   + All methods containing the string '_R' require the R software
   (installed on the computer and accessible using the command line).
   Libraries 'lhs' and 'R.matlab' must be installed on R
   + All methods containing the string '_MANU' are saved sampling (they
   are built one time are are reloaded from a .mat file)

% OUTPUT variables
 - sampling: contains the sampling</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../MultiDOE/src/DOE/fullFactDOE.html" class="code" title="function sampling=fullFactDOE(ns,Xmin,Xmax)">fullFactDOE</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/DOE/glhsR.html" class="code" title="function [sampling,newSampling]=glhsR(Xmin,Xmax,ns,oldSampling,nbInfill)">glhsR</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/DOE/ihsR.html" class="code" title="function [sampling,newSampling]=ihsR(Xmin,Xmax,ns,oldSampling)">ihsR</a>	% Build DOE using R (IHS with)</li><li><a href="../../../MultiDOE/src/DOE/lhsuR.html" class="code" title="function [sampling,newSampling]=lhsuR(Xmin,Xmax,ns,oldSampling)">lhsuR</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/DOE/mmlhsR.html" class="code" title="function [sampling,newSampling]=mmlhsR(Xmin,Xmax,ns,oldsampling,nbInfill)">mmlhsR</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/DOE/olhsR.html" class="code" title="function [sampling,newSampling]=olhsR(Xmin,Xmax,ns,oldSampling,nbInfill)">olhsR</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/crit/calcScore.html" class="code" title="function [uniform,discrepancy]=calcScore(sampling,q)">calcScore</a>	MultiDOE - Toolbox for sampling a bounded space</li><li><a href="../../../MultiDOE/src/libs/IHS/ihs.html" class="code" title="function x = ihs ( dim_num, point_num, duplication )">ihs</a>	*****************************************************************************80</li><li><a href="../../../MultiDOE/src/libs/LHS/lhsu.html" class="code" title="function s=lhsu(xmin,xmax,nsample)">lhsu</a>	s=lhsu(xmin,xmax,nsample)</li><li><a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>	% Sorting of sample points</li><li><a href="mesuTime.html" class="code" title="">mesuTime</a>	MultiDOE - Toolbox for sampling a bounded space</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../MultiDOE/multiDOE.html" class="code" title="">multiDOE</a>	% multiDOE class for manipulating sampling</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function [sampling,fich]=checkDOE(nameFile,np,ns)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% Building sampling</span>
0002 <span class="comment">% L. LAURENT -- 17/12/2010 -- luc.laurent@lecnam.net</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%Some criteria require the Matlab's toolbox &quot;Random Numbers Generators&quot; or</span>
0005 <span class="comment">%the R software</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%All sampling techniques provide sample points with values between 0 and 1.</span>
0008 <span class="comment">%The convertion to the right space is done at the end of this file.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">%% Syntax: gene_doe(doe)</span>
0011 <span class="comment">%% INPUT variables:</span>
0012 <span class="comment">% - type: Kind of DOE (doe.type): see the switch command below</span>
0013 <span class="comment">% - ns: number of sample points</span>
0014 <span class="comment">% - Xmin: lower bound of the design space</span>
0015 <span class="comment">% - Xmax: upper bound of the design space</span>
0016 <span class="comment">%   + All methods containing the string '_R' require the R software</span>
0017 <span class="comment">%   (installed on the computer and accessible using the command line).</span>
0018 <span class="comment">%   Libraries 'lhs' and 'R.matlab' must be installed on R</span>
0019 <span class="comment">%   + All methods containing the string '_MANU' are saved sampling (they</span>
0020 <span class="comment">%   are built one time are are reloaded from a .mat file)</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%% OUTPUT variables</span>
0023 <span class="comment">% - sampling: contains the sampling</span>
0024 
0025 <span class="comment">%     MultiDOE - Toolbox for sampling a bounded space</span>
0026 <span class="comment">%     Copyright (C) 2016  Luc LAURENT &lt;luc.laurent@lecnam.net&gt;</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% sources available here:</span>
0029 <span class="comment">% https://bitbucket.org/luclaurent/multidoe/</span>
0030 <span class="comment">% https://github.com/luclaurent/multidoe/</span>
0031 <span class="comment">%</span>
0032 <span class="comment">%     This program is free software: you can redistribute it and/or modify</span>
0033 <span class="comment">%     it under the terms of the GNU General Public License as published by</span>
0034 <span class="comment">%     the Free Software Foundation, either version 3 of the License, or</span>
0035 <span class="comment">%     (at your option) any later version.</span>
0036 <span class="comment">%</span>
0037 <span class="comment">%     This program is distributed in the hope that it will be useful,</span>
0038 <span class="comment">%     but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
0039 <span class="comment">%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
0040 <span class="comment">%     GNU General Public License for more details.</span>
0041 <span class="comment">%</span>
0042 <span class="comment">%     You should have received a copy of the GNU General Public License</span>
0043 <span class="comment">%     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
0044 
0045 <a name="_sub0" href="#_subfunctions" class="code">function [sampling]=buildDOE(type,ns,Xmin,Xmax,opts)</a>
0046 
0047 
0048 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">'=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=\n'</span>);
0049 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">'    &gt;&gt;&gt; BUILDING SAMPLING &lt;&lt;&lt;\n'</span>);
0050 TimeCount=<a href="mesuTime.html" class="code" title="">mesuTime</a>;
0051 
0052 <span class="comment">% For obtaining an &quot;actual&quot; pseudo-random sampling</span>
0053 s = RandStream(<span class="string">'mt19937ar'</span>,<span class="string">'Seed'</span>,<span class="string">'shuffle'</span>);
0054 RandStream.setGlobalStream(s);
0055 
0056 <span class="comment">%recovering number of iteration if specified</span>
0057 <span class="keyword">if</span> nargin&gt;=5
0058     <span class="keyword">if</span> isfield(opts,<span class="string">'iter'</span>);nbIter=opts.iter;<span class="keyword">else</span> nbIter=5;<span class="keyword">end</span>
0059 <span class="keyword">else</span>
0060     nbIter=5;
0061 <span class="keyword">end</span>
0062 
0063 <span class="comment">%number of generation for computing the scores</span>
0064 nbGene=20;
0065 
0066 <span class="comment">%default values</span>
0067 XminDef=0.*Xmin;XmaxDef=0.*Xmax+1;
0068 
0069 <span class="comment">%number of variables</span>
0070 np=numel(Xmin);
0071 
0072 <span class="comment">%% Show information</span>
0073 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">' &gt;&gt; Kind of DOE: %s\n'</span>,type);
0074 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">' &gt;&gt; Number of sample points: '</span>);
0075 fprintf(<span class="string">'%i '</span>,ns);fprintf(<span class="string">'\n'</span>);
0076 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">' &gt;&gt; Number of variables: %i\n'</span>,np);
0077 
0078 samplingOK=false;
0079 customSampling=false;
0080 
0081 <span class="comment">%%check if manual option is requested</span>
0082 flagManu=false;
0083 <span class="keyword">if</span> numel(type)&gt;3
0084     strManu=type(end-3:end);
0085 <span class="keyword">else</span>
0086     strManu=<span class="string">''</span>;
0087 <span class="keyword">end</span>
0088 <span class="comment">%</span>
0089 <span class="keyword">if</span> strcmp(strManu,<span class="string">'manu'</span>)
0090     flagManu=true;
0091     type=type(1:end-5);
0092     <span class="comment">%recover sampling if available</span>
0093     [sampling,saveFile]=<a href="#_sub1" class="code" title="subfunction [sampling,fich]=checkDOE(nameFile,np,ns)">checkDOE</a>(type,np,ns);
0094     samplingOK=~isempty(sampling);
0095 <span class="keyword">end</span>
0096 
0097 
0098 <span class="keyword">if</span> ~samplingOK
0099     samplingOK=true;
0100     <span class="comment">%depending on the chosen DOE technique</span>
0101     <span class="keyword">switch</span> type
0102         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0103         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0104         <span class="comment">% full factorial</span>
0105         <span class="keyword">case</span> <span class="string">'ffact'</span>
0106             sampling=<a href="../../../MultiDOE/src/DOE/fullFactDOE.html" class="code" title="function sampling=fullFactDOE(ns,Xmin,Xmax)">fullFactDOE</a>(ns,XminDef,XmaxDef);
0107             <span class="keyword">if</span> numel(ns)==1
0108                 ns=ns^np;
0109             <span class="keyword">end</span>
0110             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0111             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0112             <span class="comment">% Latin Hypercube Sampling with R (and initial enrichment)</span>
0113         <span class="keyword">case</span> <span class="string">'LHS_R'</span>
0114             sampling=<a href="../../../MultiDOE/src/DOE/lhsuR.html" class="code" title="function [sampling,newSampling]=lhsuR(Xmin,Xmax,ns,oldSampling)">lhsuR</a>(XminDef,XmaxDef,prod(ns(:)));
0115             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0116             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0117             <span class="comment">% Optimal Latin Hypercube Sampling with R (and initial enrichment)</span>
0118         <span class="keyword">case</span> <span class="string">'OLHS_R'</span>
0119             sampling=<a href="../../../MultiDOE/src/DOE/olhsR.html" class="code" title="function [sampling,newSampling]=olhsR(Xmin,Xmax,ns,oldSampling,nbInfill)">olhsR</a>(XminDef,XmaxDef,prod(ns(:)));
0120             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0121             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0122             <span class="comment">% Maximin Latin Hypercube Sampling with R (and initial enrichment)</span>
0123         <span class="keyword">case</span> <span class="string">'MMLHS_R'</span>
0124             sampling=<a href="../../../MultiDOE/src/DOE/mmlhsR.html" class="code" title="function [sampling,newSampling]=mmlhsR(Xmin,Xmax,ns,oldsampling,nbInfill)">mmlhsR</a>(XminDef,XmaxDef,prod(ns(:)));
0125             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0126             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0127             <span class="comment">% Genetic  Latin Hypercube Sampling with R (and initial enrichment)</span>
0128         <span class="keyword">case</span> <span class="string">'GLHS_R'</span>
0129             sampling=<a href="../../../MultiDOE/src/DOE/glhsR.html" class="code" title="function [sampling,newSampling]=glhsR(Xmin,Xmax,ns,oldSampling,nbInfill)">glhsR</a>(XminDef,XmaxDef,prod(ns(:)));
0130             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0131             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0132             <span class="comment">% Improved Hypercube Sampling avec R (et preenrichissement)</span>
0133         <span class="keyword">case</span> <span class="string">'IHS_R'</span>
0134             sampling=<a href="../../../MultiDOE/src/DOE/ihsR.html" class="code" title="function [sampling,newSampling]=ihsR(Xmin,Xmax,ns,oldSampling)">ihsR</a>(XminDef,XmaxDef,prod(ns(:)));
0135             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0136             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0137             <span class="comment">% Sampling using Halton sequence (Matlab's function)</span>
0138         <span class="keyword">case</span> <span class="string">'HALTON'</span>
0139             p = haltonset(np,<span class="string">'Skip'</span>,1e3,<span class="string">'Leap'</span>,1e2);
0140             p = scramble(p,<span class="string">'RR2'</span>);
0141             sampling=net(p,prod(ns(:)));
0142             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0143             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0144             <span class="comment">% Sampling using Sobol sequence (Matlab's function)</span>
0145         <span class="keyword">case</span> <span class="string">'SOBOL'</span>
0146             p = sobolset(np,<span class="string">'Skip'</span>,1e3,<span class="string">'Leap'</span>,1e2);
0147             p = scramble(p,<span class="string">'MatousekAffineOwen'</span>);
0148             sampling=net(p,prod(ns(:)));
0149             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0150             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0151             <span class="comment">% Latin Hypercube Sampling (Matlab's function)</span>
0152         <span class="keyword">case</span> <span class="string">'LHSD'</span>
0153             sampling=lhsdesign(prod(ns(:)),np,<span class="string">'iterations'</span>,nbIter);
0154             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0155             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0156             <span class="comment">% Latin Hypercube Sampling (Matlab's function) with minimization of the correlation (see help)</span>
0157         <span class="keyword">case</span> <span class="string">'LHSD_CORRMIN'</span>
0158             sampling=lhsdesign(prod(ns(:)),np,<span class="string">'criterion'</span>,<span class="string">'correlation'</span>,<span class="string">'iterations'</span>,nbIter);
0159             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0160             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0161             <span class="comment">% Latin Hypercube Sampling (Matlab's function) with maximin (see help)</span>
0162         <span class="keyword">case</span> <span class="string">'LHSD_MAXMIN'</span>
0163             sampling=lhsdesign(prod(ns(:)),np,<span class="string">'criterion'</span>,<span class="string">'maximin'</span>,<span class="string">'iterations'</span>,nbIter);
0164             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0165             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0166             <span class="comment">% Latin Hypercube Sampling (Matlab's function) with Non-smooth (see help)</span>
0167         <span class="keyword">case</span> <span class="string">'LHSD_NS'</span>
0168             sampling=lhsdesign(prod(ns(:)),np,<span class="string">'smooth'</span>,<span class="string">'off'</span>,<span class="string">'iterations'</span>,nbIter);
0169             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0170             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0171             <span class="comment">% Latin Hypercube Sampling (with uniform law)</span>
0172         <span class="keyword">case</span> <span class="string">'LHS'</span>
0173             sampling=<a href="../../../MultiDOE/src/libs/LHS/lhsu.html" class="code" title="function s=lhsu(xmin,xmax,nsample)">lhsu</a>(XminDef,XmaxDef,prod(ns(:)));
0174             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0175             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0176             <span class="comment">% Improved Hypercube Sampling</span>
0177         <span class="keyword">case</span> <span class="string">'IHS'</span>
0178             sampling=<a href="../../../MultiDOE/src/libs/IHS/ihs.html" class="code" title="function x = ihs ( dim_num, point_num, duplication )">ihs</a>(np,ns,5);
0179             sampling=sampling./ns;
0180             sampling=sampling';
0181             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0182             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0183             <span class="comment">% Latin Hypercube Sampling (with uniform law) with minimization of</span>
0184             <span class="comment">% distance of the inter-sample points</span>
0185         <span class="keyword">case</span> <span class="string">'LHS_O1'</span>
0186             samplingTMP=cell(1,nbGene);
0187             sc=zeros(1,nbGene);
0188             <span class="comment">%nbGene sampling are generated</span>
0189             <span class="keyword">for</span> ii=1:nbGene
0190                 samplingTMP{ii}=<a href="../../../MultiDOE/src/libs/LHS/lhsu.html" class="code" title="function s=lhsu(xmin,xmax,nsample)">lhsu</a>(XminDef,XmaxDef,prod(ns(:)));
0191                 <span class="comment">%compute score</span>
0192                 uni=<a href="../../../MultiDOE/src/crit/calcScore.html" class="code" title="function [uniform,discrepancy]=calcScore(sampling,q)">calcScore</a>(samplingTMP{ii});
0193                 sc(ii)=uni.sumDist;
0194             <span class="keyword">end</span>
0195             [~,IX]=min(sc);
0196             sampling=samplingTMP{IX};
0197             clear samplingTMP;
0198             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0199             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0200             <span class="comment">% LHS_O1 with storange of the data</span>
0201         <span class="keyword">case</span> <span class="string">'LHS_O1_manu'</span>
0202             <span class="comment">%recover sampling if available</span>
0203             [sampling,saveFile]=<a href="#_sub1" class="code" title="subfunction [sampling,fich]=checkDOE(nameFile,np,ns)">checkDOE</a>(<span class="string">'lhs_o1'</span>,np,ns);
0204             <span class="keyword">if</span> isempty(sampling)
0205                 samplingTMP=cell(1,nbGene);
0206                 sc=zeros(1,nbGene);
0207                 <span class="comment">%nbGene sampling are generated</span>
0208                 <span class="keyword">for</span> ii=1:nbGene
0209                     samplingTMP{ii}=<a href="../../../MultiDOE/src/libs/LHS/lhsu.html" class="code" title="function s=lhsu(xmin,xmax,nsample)">lhsu</a>(XminDef,XmaxDef,prod(ns(:)));
0210                     <span class="comment">%compute score</span>
0211                     uni=<a href="../../../MultiDOE/src/crit/calcScore.html" class="code" title="function [uniform,discrepancy]=calcScore(sampling,q)">calcScore</a>(samplingTMP{ii});
0212                     sc(ii)=uni.sumDist;
0213                 <span class="keyword">end</span>
0214                 [~,IX]=min(sc);
0215                 sampling=samplingTMP{IX};
0216                 clear samplingTMP
0217                 save(saveFile,<span class="string">'sampling'</span>);
0218             <span class="keyword">end</span>
0219             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0220             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0221             <span class="comment">% random sampling</span>
0222         <span class="keyword">case</span> <span class="string">'rand'</span>
0223             sampling=rand(prod(ns(:)),np);
0224             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0225             <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0226             <span class="comment">%manually defined sampling</span>
0227         <span class="keyword">case</span> <span class="string">'custom'</span>
0228             sampling=opts.manu;
0229             customSampling=true;
0230             disp(<span class="string">'/!\ Manual sampling (cf. initDOE.m)'</span>);
0231         <span class="keyword">otherwise</span>
0232             <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>([<span class="string">'Undefined DOE method '</span> type <span class="string">' (see '</span>,mfilename,<span class="string">')'</span>]);
0233             samplingOK=false;
0234     <span class="keyword">end</span>
0235 <span class="keyword">end</span>
0236 
0237 <span class="comment">%save sampling</span>
0238 <span class="keyword">if</span> flagManu&amp;&amp;samplingOK
0239     save(saveFile,<span class="string">'sampling'</span>);
0240 <span class="keyword">end</span>
0241 
0242 <span class="keyword">if</span> samplingOK
0243     <span class="keyword">if</span> ~customSampling
0244         <span class="comment">% correction of the sampling for obtaining sampling defined on the</span>
0245         <span class="comment">% right design space</span>
0246         sampling=sampling.*repmat(Xmax(:)'-Xmin(:)',prod(ns(:)),1)+repmat(Xmin(:)',prod(ns(:)),1);
0247     <span class="keyword">end</span>
0248 <span class="keyword">else</span>
0249     sampling=[];
0250 <span class="keyword">end</span>
0251 TimeCount.stop;
0252 <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">'=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=\n'</span>);
0253 <span class="keyword">end</span>
0254 
0255 
0256 <span class="comment">%%function for checking if a sampling already exists</span>
0257 <a name="_sub1" href="#_subfunctions" class="code">function [sampling,fich]=checkDOE(nameFile,np,ns)</a>
0258 
0259 <span class="comment">%check if the storage folder exists</span>
0260 <span class="keyword">if</span> exist(<span class="string">'tmpDOE/TIR_MANU'</span>,<span class="string">'dir'</span>)~=7
0261     mkdir(<span class="string">'tmpDOE/TIR_MANU'</span>);
0262 <span class="keyword">end</span>
0263 
0264 <span class="comment">%if the sampling exists, it will be loaded</span>
0265 fi=[<span class="string">'tmpDOE/TIR_MANU/'</span> nameFile <span class="string">'_man_'</span> num2str(np) <span class="string">'_'</span>  num2str(ns)];
0266 fich=[fi <span class="string">'.mat'</span>];
0267 <span class="keyword">if</span> exist(fich,<span class="string">'file'</span>)==2
0268     st=load(fich);
0269     sampling=st.sampling;
0270 <span class="keyword">else</span>
0271     <a href="Mfprintf.html" class="code" title="function nbT = Mfprintf(varargin)">Mfprintf</a>(<span class="string">' !! Sampling does not exist \n'</span>);
0272     sampling=[];
0273 <span class="keyword">end</span>
0274 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Wed 08-May-2019 14:48:29 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>